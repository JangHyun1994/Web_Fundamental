<!--step01_ajax_get_json.html-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajax Get</title>
    <script type="text/javascript" src=""
    <script>
        var xhr;
        if(window.XMLHttpRequest) {
            //모질라, 사파리, 크롬, IE+7,....
            xhr = new XMLHttpRequest();
        }else{
            //IE 6 이하.
            xhr = new ActiveXObject("Microsoft.XMLHTTP");
        }
        if(xhr==null){
            alert("Error create xhr object");
        }

        console.log(xhr);
        
        $(function(){
            $('#btn').click(function(){
               let url = 'json_data.json';
                //true : 비동기 통신, false 동기
               xhr.open('GET',url, true);
               //ajax로 데이터를 요청
               xhr.send(null);
               //ajax로 요청한 데이터를 받는 함수
               xhr.onreadystatechange = function(){
                   if(xhr.readState == 4 && xhr.status == 200){
                    console.log(typeof xhr.responseText);
                    console.log(xhr.responseText);
                    //문자열을 javascript 객체로 변환.
                    var obj = {
                        "cafelist" : [
                            {"name" : "Lee", "clubid" : "lmp1011"}
                            {"name" : "Noh", "clubid" : "nmh1011"}
                            {"name" : "Kim", "clubid" : "kdj1011"}
                            ]
                    }
                   }
               }
            })
        });


    </script>
</head>
<body>
    <button id="btn">가져오기</button>
    <select id="div"></select>    

</body>
</html>